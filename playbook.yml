---
- name: Update all.
  hosts: all
  become: true

  tasks:
  - name: Update and upgrade apt packages
    apt:
      upgrade: 'yes'
      update_cache: 'yes'
      cache_valid_time: 86400 # 1 day

  - name: Install Initial Packages
    apt: 
      name: ['emacs-nox', 'curl', 'wget', 'git', 'htop'] 
      state: latest

  - name: Update default password.
    user: 
      name: christophe
      update_password: always 
      password: "{{ newpassword|password_hash('sha512') }}"